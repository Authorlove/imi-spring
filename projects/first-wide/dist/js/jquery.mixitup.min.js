(function(n){function t(t,r,u,f,e){function p(){h.unbind();r&&i(r,u,f,e);e.startOrder=[];e.newOrder=[];e.origSort=[];e.checkSort=[];w.removeStyle(e.prefix+"filter, filter, "+e.prefix+"transform, transform, opacity, display").css(e.clean).removeAttr("data-checksum");window.atob||w.css({display:"none",opacity:"0"});h.removeStyle(e.prefix+"transition, transition, "+e.prefix+"perspective, perspective, "+e.prefix+"perspective-origin, perspective-origin, "+(e.resizeContainer?"height":""));"list"==e.layoutMode?(l.css({display:e.targetDisplayList,opacity:"1"}),e.origDisplay=e.targetDisplayList):(l.css({display:e.targetDisplayGrid,opacity:"1"}),e.origDisplay=e.targetDisplayGrid);e.origLayout=e.layoutMode;setTimeout(function(){if(w.removeStyle(e.prefix+"transition, transition"),e.mixing=!1,"function"==typeof e.onMixEnd){var n=e.onMixEnd.call(this,e);e=n?n:e}})}var c,o,v,k,w,h,l,y,d;for(clearInterval(e.failsafe),e.mixing=!0,"function"==typeof e.onMixStart&&(o=e.onMixStart.call(this,e),e=o?o:e),c=e.transitionSpeed,o=0;2>o;o++)v=0==o?v=e.prefix:"",e.transition[v+"transition"]="all "+c+"ms linear",e.transition[v+"transform"]=v+"translate3d(0,0,0)",e.perspective[v+"perspective"]=e.perspectiveDistance+"px",e.perspective[v+"perspective-origin"]=e.perspectiveOrigin;k=e.targetSelector;w=f.find(k);w.each(function(){this.data={}});h=w.parent();h.css(e.perspective);e.easingFallback="ease-in-out";"smooth"==e.easing&&(e.easing="cubic-bezier(0.25, 0.46, 0.45, 0.94)");"snap"==e.easing&&(e.easing="cubic-bezier(0.77, 0, 0.175, 1)");"windback"==e.easing&&(e.easing="cubic-bezier(0.175, 0.885, 0.320, 1.275)",e.easingFallback="cubic-bezier(0.175, 0.885, 0.320, 1)");"windup"==e.easing&&(e.easing="cubic-bezier(0.6, -0.28, 0.735, 0.045)",e.easingFallback="cubic-bezier(0.6, 0.28, 0.735, 0.045)");o="list"==e.layoutMode&&null!=e.listEffects?e.listEffects:e.effects;Array.prototype.indexOf&&(e.fade=-1<o.indexOf("fade")?"0":"",e.scale=-1<o.indexOf("scale")?"scale(.01)":"",e.rotateZ=-1<o.indexOf("rotateZ")?"rotate(180deg)":"",e.rotateY=-1<o.indexOf("rotateY")?"rotateY(90deg)":"",e.rotateX=-1<o.indexOf("rotateX")?"rotateX(90deg)":"",e.blur=-1<o.indexOf("blur")?"blur(8px)":"",e.grayscale=-1<o.indexOf("grayscale")?"grayscale(100%)":"");t=t.replace(/\s|\//g,".");l=n();y=n();"or"==e.filterLogic?(d=t.split("."),!0==e.multiFilter&&""==d[0]&&d.shift(),1>d.length?y=y.add(f.find(k+":visible")):w.each(function(){for(var r=0,t=n(this),i=0;i<d.length;i++)t.hasClass(d[i])&&(l=l.add(t),r++);0==r&&(y=y.add(t))})):(l=l.add(h.find(k+"."+t)),y=y.add(h.find(k+":not(."+t+"):visible")));t=l.length;var b=n(),a=n(),s=n();if(y.each(function(){var t=n(this);"none"!=t.css("display")&&(b=b.add(t),s=s.add(t))}),l.filter(":visible").length==t&&!b.length&&!r){if(e.origLayout==e.layoutMode)return p(),!1;if(1==l.length)return"list"==e.layoutMode?(f.addClass(e.listClass),f.removeClass(e.gridClass),s.css("display",e.targetDisplayList)):(f.addClass(e.gridClass),f.removeClass(e.listClass),s.css("display",e.targetDisplayGrid)),p(),!1}if(e.origHeight=h.height(),l.length){if(f.removeClass(e.failClass),l.each(function(){var t=n(this);"none"==t.css("display")?a=a.add(t):s=s.add(t)}),e.origLayout!=e.layoutMode&&!1==e.animateGridList)return"list"==e.layoutMode?(f.addClass(e.listClass),f.removeClass(e.gridClass),s.css("display",e.targetDisplayList)):(f.addClass(e.gridClass),f.removeClass(e.listClass),s.css("display",e.targetDisplayGrid)),p(),!1;if(!window.atob||(w.css(e.clean),s.each(function(){this.data.origPos=n(this).offset()}),"list"==e.layoutMode?(f.addClass(e.listClass),f.removeClass(e.gridClass),a.css("display",e.targetDisplayList)):(f.addClass(e.gridClass),f.removeClass(e.listClass),a.css("display",e.targetDisplayGrid)),a.each(function(){this.data.showInterPos=n(this).offset()}),b.each(function(){this.data.hideInterPos=n(this).offset()}),s.each(function(){this.data.preInterPos=n(this).offset()}),"list"==e.layoutMode?s.css("display",e.targetDisplayList):s.css("display",e.targetDisplayGrid),r&&i(r,u,f,e),r&&e.origSort.compare(e.checkSort)))return p(),!1;for(b.hide(),a.each(function(){this.data.finalPos=n(this).offset()}),s.each(function(){this.data.finalPrePos=n(this).offset()}),e.newHeight=h.height(),r&&i("reset",null,f,e),a.hide(),s.css("display",e.origDisplay),"block"==e.origDisplay?(f.addClass(e.listClass),a.css("display",e.targetDisplayList)):(f.removeClass(e.listClass),a.css("display",e.targetDisplayGrid)),e.resizeContainer&&h.css("height",e.origHeight+"px"),t={},o=0;2>o;o++)v=0==o?v=e.prefix:"",t[v+"transform"]=e.scale+" "+e.rotateX+" "+e.rotateY+" "+e.rotateZ,t[v+"filter"]=e.blur+" "+e.grayscale;a.css(t);s.each(function(){var t=this.data,f=n(this),r,i,u;for(f.hasClass("mix_tohide")?(t.preTX=t.origPos.left-t.hideInterPos.left,t.preTY=t.origPos.top-t.hideInterPos.top):(t.preTX=t.origPos.left-t.preInterPos.left,t.preTY=t.origPos.top-t.preInterPos.top),r={},i=0;2>i;i++)u=0==i?u=e.prefix:"",r[u+"transform"]="translate("+t.preTX+"px,"+t.preTY+"px)";f.css(r)});"list"==e.layoutMode?(f.addClass(e.listClass),f.removeClass(e.gridClass)):(f.addClass(e.gridClass),f.removeClass(e.listClass));setTimeout(function(){var t,r,i;if(e.resizeContainer){for(t={},r=0;2>r;r++)i=0==r?i=e.prefix:"",t[i+"transition"]="all "+c+"ms ease-in-out",t.height=e.newHeight+"px";h.css(t)}for(b.css("opacity",e.fade),a.css("opacity",1),a.each(function(){var i=this.data,r,u,t;for(i.tX=i.finalPos.left-i.showInterPos.left,i.tY=i.finalPos.top-i.showInterPos.top,r={},u=0;2>u;u++)t=0==u?t=e.prefix:"",r[t+"transition-property"]=t+"transform, "+t+"filter, opacity",r[t+"transition-timing-function"]=e.easing+", linear, linear",r[t+"transition-duration"]=c+"ms",r[t+"transition-delay"]="0",r[t+"transform"]="translate("+i.tX+"px,"+i.tY+"px)",r[t+"filter"]="none";n(this).css("-webkit-transition","all "+c+"ms "+e.easingFallback).css(r)}),s.each(function(){var t=this.data,i,r,u;for(t.tX=0!=t.finalPrePos.left?t.finalPrePos.left-t.preInterPos.left:0,t.tY=0!=t.finalPrePos.left?t.finalPrePos.top-t.preInterPos.top:0,i={},r=0;2>r;r++)u=0==r?u=e.prefix:"",i[u+"transition"]="all "+c+"ms "+e.easing,i[u+"transform"]="translate("+t.tX+"px,"+t.tY+"px)";n(this).css("-webkit-transition","all "+c+"ms "+e.easingFallback).css(i)}),t={},r=0;2>r;r++)i=0==r?i=e.prefix:"",t[i+"transition"]="all "+c+"ms "+e.easing+", "+i+"filter "+c+"ms linear, opacity "+c+"ms linear",t[i+"transform"]=e.scale+" "+e.rotateX+" "+e.rotateY+" "+e.rotateZ,t[i+"filter"]=e.blur+" "+e.grayscale,t.opacity=e.fade;b.css(t);h.bind("webkitTransitionEnd transitionend otransitionend oTransitionEnd",function(t){(-1<t.originalEvent.propertyName.indexOf("transform")||-1<t.originalEvent.propertyName.indexOf("opacity"))&&(-1<k.indexOf(".")?n(t.target).hasClass(k.replace(".",""))&&p():n(t.target).is(k)&&p())})},10);e.failsafe=setTimeout(function(){e.mixing&&p()},c+400)}else{if(e.resizeContainer&&h.css("height",e.origHeight+"px"),!window.atob)return p(),!1;b=y;setTimeout(function(){var n,t,i;if(h.css(e.perspective),e.resizeContainer){for(n={},t=0;2>t;t++)i=0==t?i=e.prefix:"",n[i+"transition"]="height "+c+"ms ease-in-out",n.height=e.minHeight+"px";h.css(n)}if(w.css(e.transition),y.length){for(n={},t=0;2>t;t++)i=0==t?i=e.prefix:"",n[i+"transform"]=e.scale+" "+e.rotateX+" "+e.rotateY+" "+e.rotateZ,n[i+"filter"]=e.blur+" "+e.grayscale,n.opacity=e.fade;b.css(n);h.bind("webkitTransitionEnd transitionend otransitionend oTransitionEnd",function(n){(-1<n.originalEvent.propertyName.indexOf("transform")||-1<n.originalEvent.propertyName.indexOf("opacity"))&&(f.addClass(e.failClass),p())})}else e.mixing=!1},10)}}function i(t,i,r,u){function a(n,i){return 1*n.attr(t).toLowerCase()<1*i.attr(t).toLowerCase()?-1:1*n.attr(t).toLowerCase()>1*i.attr(t).toLowerCase()?1:0}function o(n){"asc"==i?f.prepend(n).prepend(" \t"):f.append(n).append(" \t")}var f,h,l;if(r.find(u.targetSelector).wrapAll('<div class="mix_sorter"/>'),f=r.find(".mix_sorter"),u.origSort.length||f.find(u.targetSelector+":visible").each(function(){n(this).wrap("<s/>");u.origSort.push(n(this).parent().html().replace(/\s+/g,""));n(this).unwrap()}),f.empty(),"reset"==t)n.each(u.startOrder,function(){f.append(this).append(" \t")});else if("default"==t)n.each(u.origOrder,function(){o(this)});else if("random"==t){if(!u.newOrder.length){for(var e=u.startOrder.slice(),c=e.length,s=c;s--;)h=parseInt(Math.random()*c),l=e[s],e[s]=e[h],e[h]=l;u.newOrder=e}n.each(u.newOrder,function(){f.append(this).append(" \t")})}else"custom"==t?n.each(i,function(){o(this)}):("undefined"==typeof u.origOrder[0].attr(t)&&console.log("No such attribute found. Terminating"),u.newOrder.length||(n.each(u.origOrder,function(){u.newOrder.push(n(this))}),u.newOrder.sort(a)),n.each(u.newOrder,function(){o(this)}));u.checkSort=[];f.find(u.targetSelector+":visible").each(function(t){var i=n(this);0==t&&i.attr("data-checksum","1");i.wrap("<s/>");u.checkSort.push(i.parent().html().replace(/\s+/g,""));i.unwrap()});r.find(u.targetSelector).unwrap()}var r={init:function(i){return this.each(function(){var r={targetSelector:".mix",filterSelector:".filter",sortSelector:".sort",buttonEvent:"click",effects:["fade","scale"],listEffects:null,easing:"smooth",layoutMode:"grid",targetDisplayGrid:"inline-block",targetDisplayList:"block",listClass:"",gridClass:"",transitionSpeed:600,showOnLoad:"all",multiFilter:!1,filterLogic:"or",resizeContainer:!0,minHeight:0,failClass:"fail",perspectiveDistance:"3000",perspectiveOrigin:"50% 50%",animateGridList:!0,onMixLoad:null,onMixStart:null,onMixEnd:null,container:null,origOrder:[],startOrder:[],newOrder:[],origSort:[],checkSort:[],filter:"",mixing:!1,origDisplay:"",origLayout:"",origHeight:0,newHeight:0,isTouch:!1,resetDelay:0,failsafe:null,prefix:"",easingFallback:"ease-in-out",transition:{},perspective:{},clean:{},fade:"1",scale:"",rotateX:"",rotateY:"",rotateZ:"",blur:"",grayscale:""},e,u,f,s,o;i&&n.extend(r,i);this.config=r;n.support.touch="ontouchend"in document;n.support.touch&&(r.isTouch=!0,r.resetDelay=350);r.container=n(this);e=r.container;n:{for(u=e[0],f=["Webkit","Moz","O","ms"],s=0;s<f.length;s++)if(f[s]+"Transition"in u.style){u=f[s];break n}u="transition"in u.style?"":!1}for(r.prefix=u,r.prefix=r.prefix?"-"+r.prefix.toLowerCase()+"-":"",e.find(r.targetSelector).each(function(){r.origOrder.push(n(this))}),u=0;2>u;u++)f=0==u?f=r.prefix:"",r.transition[f+"transition"]="all "+r.transitionSpeed+"ms ease-in-out",r.perspective[f+"perspective"]=r.perspectiveDistance+"px",r.perspective[f+"perspective-origin"]=r.perspectiveOrigin;for(u=0;2>u;u++)f=0==u?f=r.prefix:"",r.clean[f+"transition"]="none";"list"==r.layoutMode?(e.addClass(r.listClass),r.origDisplay=r.targetDisplayList):(e.addClass(r.gridClass),r.origDisplay=r.targetDisplayGrid);r.origLayout=r.layoutMode;u=r.showOnLoad.split(" ");n.each(u,function(){n(r.filterSelector+'[data-filter="'+this+'"]').addClass("active")});e.find(r.targetSelector).addClass("mix_all");"all"==u[0]&&(u[0]="mix_all",r.showOnLoad="mix_all");o=n();n.each(u,function(){o=o.add(n("."+this))});o.each(function(){var t=n(this);"list"==r.layoutMode?t.css("display",r.targetDisplayList):t.css("display",r.targetDisplayGrid);t.css(r.transition)});setTimeout(function(){r.mixing=!0;o.css("opacity","1");setTimeout(function(){if("list"==r.layoutMode?o.removeStyle(r.prefix+"transition, transition").css({display:r.targetDisplayList,opacity:1}):o.removeStyle(r.prefix+"transition, transition").css({display:r.targetDisplayGrid,opacity:1}),r.mixing=!1,"function"==typeof r.onMixLoad){var n=r.onMixLoad.call(this,r);r=n?n:r}},r.transitionSpeed)},10);r.filter=r.showOnLoad;n(r.sortSelector).bind(r.buttonEvent,function(){if(!r.mixing){var i=n(this),u=i.attr("data-sort"),f=i.attr("data-order");if(i.hasClass("active")){if("random"!=u)return!1}else n(r.sortSelector).removeClass("active"),i.addClass("active");e.find(r.targetSelector).each(function(){r.startOrder.push(n(this))});t(r.filter,u,f,e,r)}});n(r.filterSelector).bind(r.buttonEvent,function(){var i,u;r.mixing||(i=n(this),!1==r.multiFilter?(n(r.filterSelector).removeClass("active"),i.addClass("active"),r.filter=i.attr("data-filter"),n(r.filterSelector+'[data-filter="'+r.filter+'"]').addClass("active"),"all"==r.filter&&(r.filter="mix_all")):(u=i.attr("data-filter"),"all"==u&&(u="mix_all"),i.hasClass("active")?(i.removeClass("active"),r.filter=r.filter.replace(RegExp("(\\s|^)"+u),"")):(i.addClass("active"),r.filter=r.filter+" "+u)),t(r.filter,null,null,e,r))})})},toGrid:function(){return this.each(function(){var i=this.config;"grid"!=i.layoutMode&&(i.layoutMode="grid",t(i.filter,null,null,n(this),i))})},toList:function(){return this.each(function(){var i=this.config;"list"!=i.layoutMode&&(i.layoutMode="list",t(i.filter,null,null,n(this),i))})},filter:function(i){return this.each(function(){var r=this.config;n(r.filterSelector).removeClass("active");n(r.filterSelector+'[data-filter="'+i+'"]').addClass("active");"all"==i&&(i="mix_all");r.mixing||(r.filter=i,t(i,null,null,n(this),r))})},sort:function(i){return this.each(function(){var r=this.config,u,f;n.isArray(i)?(u=i[0],f=i[1]):(u=i,f="desc");r.mixing||(n(this).find(r.targetSelector).each(function(){r.startOrder.push(n(this))}),t(r.filter,u,f,n(this),r))})}};n.fn.mixitup=function(n){return r[n]?r[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"==typeof n||!n?r.init.apply(this,arguments):void 0};n.fn.removeStyle=function(t){return this.each(function(){var r=n(this),i;t=t.replace(/\s+/g,"");i=t.split(",");n.each(i,function(){var n=RegExp(this.toString()+"[^;]+;?","g");r.attr("style",function(t,i){if(i)return i.replace(n,"")})})})};Array.prototype.compare=function(n){if(this.length!=n.length)return!1;for(var t=0;t<n.length;t++)if(this[t].compare&&!this[t].compare(n[t])||this[t]!==n[t])return!1;return!0}})(jQuery);